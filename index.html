<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Gran'Games</title>
    <link id="dynamic-style" rel="stylesheet" href="styles/main-menu.css" />
  </head>
  <body>
    <!-- Conteneur du menu -->
    <div id="menu">
      <h1>🎮 Choisis ton jeu !</h1>
      <div class="game-selection">
        <div class="game-card" onclick="startGame('clicker')">
          <img src="images/clicker.png" alt="Clicker Game" />
          <h2>🖱️ Skibidi Clicker</h2>
          <p>Clicker rapide avec des bonus et mini-jeux.</p>
        </div>
        <div class="game-card" onclick="startGame('impostor')">
          <img src="images/impostor.png" alt="Impostor Game" />
          <h2>🕵️ Jeu de l'Imposteur</h2>
          <p>Un mot est différent… Saurez-vous le trouver ?</p>
        </div>
        <div class="game-card" onclick="startGame('lyrics')">
          <img src="images/lyrics.png" alt="Lyrics Game" />
          <h2>🎤 Lyrics</h2>
          <p>Devine les paroles mot par mot.</p>
        </div>
        <div class="game-card" onclick="startGame('runner')">
          <img src="images/runner.png" alt="Runner Game" />
          <h2>🏃 Infinite Runner</h2>
          <p>Évite les obstacles et va le plus loin possible.</p>
        </div>
      </div>
    </div>

    <!-- Conteneur du jeu Skibidi Clicker -->
    <div id="clicker-game" class="game-container" style="display: none">
      <button onclick="goBack()" class="back-button">Gran.Menu</button>
      <div class="container">
        <h1>Skibidi Clicker</h1>
        <p>Score : <span id="score">0</span></p>
        <div id="cps">0 clic/s</div>
        <button id="clickButton">Clique-moi !</button>
      </div>
      <div id="bg-video"></div>

      <!-- Mini-jeu code à 4 chiffres -->
      <div id="code-game" style="display: none">
        <h2>🔐 Trouve le code à 4 chiffres</h2>
        <p>
          <span style="color: yellow">Jaune</span> = Bon chiffre mauvaise place
          / <span style="color: red">Rouge</span> = Bon chiffre bonne place
        </p>
        <div id="code-inputs"></div>
        <input
          type="text"
          id="code-attempt"
          maxlength="4"
          placeholder="Ex:1234"
          inputmode="numeric"
          pattern="[0-9]*"
        />
        <button onclick="submitCodeAttempt()">Valider</button>
        <div id="code-feedback"></div>
      </div>
    </div>

    <!-- Conteneur du jeu Impostor -->
    <div id="impostor-game" class="game-container" style="display: none">
      <button onclick="goBack()" class="back-button">Gran.Menu</button>
      <h1 id="impostor-title">🕵️ Jeu de l'Imposteur</h1>
      <div id="word-bar"></div>

      <div id="players-inputs"></div>

      <!-- Gabarit de joueur -->
      <template id="player-template">
        <div class="player-line">
          <div class="player-name">Nom</div>
          <div class="player-header">
            <span class="player-timer"></span>
          </div>
          <div class="hints"></div>
        </div>
      </template>

      <!-- Gabarit de bouton de vote -->
      <template id="vote-button-template">
        <button class="vote-button"></button>
      </template>

      <!-- Bloc lobby côte à côte -->
      <div id="lobby-container">
        <div id="lobby-setup">
          <input
            type="text"
            id="room-id"
            placeholder="Nom de la salle (ex: room123)"
          />
          <input type="text" id="username" placeholder="Ton pseudo" />
          <button onclick="joinImpostorRoom()">Rejoindre la salle</button>

          <div id="lobby-options" class="hidden">
            <label for="round-count">Nombre de manches :</label>
            <input type="number" id="round-count" min="1" max="10" value="3" />
            <br />
            <label for="round-timer">Durée par tour (s) :</label>
            <input
              type="number"
              id="round-timer"
              min="10"
              max="120"
              value="60"
            />
          </div>
        </div>

        <div id="lobby-players" style="display: none"></div>
      </div>

      <!-- Bouton centré sous le bloc lobby -->
      <div id="start-button-container">
        <button
          id="new-game"
          onclick="startImpostorGame()"
          style="display: none"
        >
          Nouvelle manche
        </button>
      </div>

      <button id="end-round" class="hidden">Passer aux votes</button>

      <div id="hint-phase"></div>
      <div id="reveal-phase"></div>
    </div>

    <!-- ====== Page intermédiaire Lyrics : sélection de musique ====== -->
    <div id="lyrics-select" class="game-container" style="display: none">
      <button onclick="goBack()" class="back-button">Gran.Menu</button>
      <h1>🎤 Choisis une musique</h1>

      <div class="ls-toolbar">
        <input
          id="ls-search"
          type="search"
          placeholder="Rechercher titre, artiste..."
        />
        <select id="ls-genre">
          <option value="">Tous les genres</option>
        </select>
        <select id="ls-artist">
          <option value="">Tous les artistes</option>
        </select>
        <select id="ls-year">
          <option value="">Toutes années</option>
        </select>
        <select id="ls-sort">
          <option value="title-asc">Titre (A→Z)</option>
          <option value="title-desc">Titre (Z→A)</option>
          <option value="artist-asc">Artiste (A→Z)</option>
          <option value="artist-desc">Artiste (Z→A)</option>
          <option value="year-desc">Année (récent→ancien)</option>
          <option value="year-asc">Année (ancien→récent)</option>
          <option value="words-desc">Mots à trouver (↓)</option>
          <option value="words-asc">Mots à trouver (↑)</option>
        </select>
      </div>

      <div id="ls-grid" class="ls-grid" aria-live="polite"></div>
    </div>

    <!-- ====== Page du jeu Lyrics ====== -->
    <div id="lyrics-game" class="game-container" style="display: none">
      <button onclick="goBack()" class="back-button">Gran.Menu</button>
      <div class="lyrics-topbar">
        <button id="lyrics-back-select">Retour</button>
        <h1 style="margin: 0">🎤 Lyrics</h1>
      </div>

      <div id="lyrics-song-info" class="lyrics-song-info"></div>

      <!-- Stats -->
      <div class="lyrics-stats">
        Progression : <span id="lyrics-progress">0/0</span>
      </div>

      <!-- Saisie -->
      <div class="lyrics-input">
        <input
          id="lyrics-guess"
          type="text"
          placeholder="Tape un mot (accents/majuscules ignorés)"
        />
        <button id="lyrics-submit">Abandonner</button>
        <button id="lyrics-clear" title="Effacer la saisie">✖</button>
      </div>

      <div id="lyrics-board" class="lyrics-board" aria-live="polite"></div>
      <p class="lyrics-legend">
        Les répétitions d’un mot se révèlent d’un coup. Accents, ponctuation et
        majuscules ignorés.
      </p>
    </div>

    <!-- Conteneur du jeu Runner -->
    <div id="runner-game" class="game-container" style="display: none">
      <button onclick="goBack()" class="back-button">Gran.Menu</button>
      <h1>🏃 Infinite Runner</h1>
      <p>Le jeu de course arrive bientôt...</p>
    </div>

    <!-- Chargement des scripts JavaScript -->
    <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
    <script src="javascript/imposteur.js"></script>
    <script src="javascript/variables.js"></script>
    <script src="javascript/navigation.js"></script>
    <script src="javascript/clicker.js"></script>
    <script src="javascript/lyrics.js"></script>
  </body>
</html>
